# Λεωφορεία

## Το αποτέλεσμα

Το έργο μας είναι ημιτελές, και δεν συναγωνίζεται τα άλλα έργα,
για τεχνικούς λόγους:
Είχαμε σχεδιάσει πολλές δυνατότητες σε διαφορετικούς ρόλους
που δεν μπορούσαν να υλοποιηθούν σε microbit:
Κατά την ανάπτυξη των διαφορετικών προγραμμάτων
αυτά δεν χωρούσαν για να κατέβουν στην μνήμη του microbit.

Όμως αξίζει να μοιραστούμε τον σχεδιασμό μας,
που εκφράζει μέρους του κόπου μας,
κυρίως στο τι δυνατότητες σχεδιάζουμε για τα σενάριά μας
και με τι επικοινωνία των διαφόρων μονάδων αυτές θα υλοποιηθούν.

## Οι πιθανές λύσεις

Το microbit δεν μπορούσε να αποθηκεύσει ένα αρκετά μεγάλο πρόγραμμα,
και έτσι έπρεπε να επιλέξουμε
  * Να αλλάξουμε γλώσσα προγραμματισμού σε άλλη με μικρότερο αποτύπωμα
      * αλλά με τις απαραίτητες επεκτάσεις για το υλικό μας
  * Να απλοποιήσουμε το πρόγραμμα
      * αρχικά σε ότι αφορά την αναγνωσιμότητά του
          * χρήση ακεραίων και όχι κειμένων για καταστάσεις
              * και εξωτερική τεκμηρίωση
          * λιγότερα εφέ με φώτα και μουσική
          * λιγότερα σενάρια
     * και λιγότερη λειτουργικότητα
  * Να τρέξουμε το πρόγραμμα σε ένα server,
      * όπου όλα τα microbits θα στέλνουν δεδομένα,
      * θα γίνονται όλοι οι υπολογισμοί και
      * από όπου όλα τα microbits θα παίρνουν εντολές
      * Ένα microbit θα μεσολαβεί για την επικοινωνία με τον server.

### Κοινές παράμετροι
  * RadioChannel 40
  * ID, ταυτότητα / ρόλος
      * 0 για το σταθμαρχείο
      * 0 για ανεξάρτητο όχημα
      * 1, 2 για τα οχήματα σε ακολουθία
          * Αλλάζει με το διακόπτη `A+B`
          * Ρυθμίζεται αυτόματα, παίρνοντας σταθερή τιμή
              * ή το πρώτο διαθέσιμο

### Σταθμαρχείο
  * λήψη πληροφοριών θέσης / χρόνου / καθυστέρησης
      * παρουσίαση στην LED οθόνη
      * παρουσίαση σε επιπλέον LCD οθόνη
      * ηχητικά ή οπτικά εφέ
      * σειριακή μετάδοση στον υπολογιστή
  * λήψη πληροφοριών στάσεων των οχημάτων
      * σειριακή μετάδοση στον υπολογιστή
  * λήψη εντολών
     * αποστολή εντολών προς τους οδηγούς

## Σχεδιασμός συμπεριφοράς οχήματος
  * σειριακή μετάδοση των πληροφοριών

### Παράλληλα σενάρια
  * Επεξεργασίας εντολών
  * Κίνησης
  * Μουσικής
  * Φωτισμού
  * Μετάδοσης / αποστολής
  * Μετάδοσης / λήψης

### Γενικές ρυθμίσεις

  * GeneralMode:
      * *κενό*: φυσιολογική κίνηση
      * `TRAIN`: εκπαιδευτική κίνηση (απομνημόνευση διαδρομής)
      * `STILL`: ακινησία και εμφάνιση των εισερχόμενων εντολών (IR/radio) και δεδομένων
          * έξοδος στη LED οθόνη και σε σειριακή πόρτα
      * Αλλάζει (κυκλικά) με το διακόπτη `B`
  * MusicMode: *κενό* ή *ονόματα*
  * LightMode: *κενό* ή *ονόματα*
  * RadioTXmode:
      * *κενό*: μη χρήση - σιωπή ασυρμάτου
      * `1`: αποστολή πληροφοριών θέσης / χρόνου
      * `2`: αποστολή πληροφοριών θέσης / χρόνου και στάσεων
  * RadioRXmode:
      * *κενό*: μη χρήση - σιωπή ασυρμάτου
      * `1`: λήψη πληροφοριών θέσης / χρόνου
  * StopsMode:
      * *κενό*: χωρίς στάσεις
      * `2`: μικρές στάσεις για 2 δευτερόλεπτα
      * `5`: μεγάλες στάσεις για 5 δευτερόλεπτα
      * `2:5`: στάσεις για 2-5 δευτερόλεπτα, τυχαία
  * DriveMode:
      * *κενό*: χειροκίνητο
      * `LEFT`: σε εμπόδια στρίψε αριστερά
      * `RIGHT`: σε εμπόδια στρίψε δεξιά
      * `WAIT`: σε εμπόδια απλώς περίμενε να φύγουν ?
      * `LINE`: ακολούθησε τη γραμμή
      * `STOPS`: ακολούθησε τη γραμμή και κάνε στάσεις σε κάθετες γραμμές ?
      * ...
      * Αλλάζει (κυκλικά) με το διακόπτη `A`

### Χειρισμός / χειροκίνητη οδήγηση

Το όχημα θα μπορεί να παίρνει άμεσα εντολές οδήγησης με τηλεχειρισμό,
  * Για αλλαγή της στιγμιαίας συμπεριφοράς του οχήματος, και παύση τυχόν αυτόματης οδήγησης
    * turnLeft
    * turnRight
    * forward
    * backward / reverse
  * Για μόνιμη αλλαγή της οδήγησής του οχήματος
    * power Off - κλείνουμε κινητήρες / φώτα / μουσική
    * speed Up - αύξηση της ταχύτητας κίνησης
    * speed Down - ελάττωση της ταχύτητας κίνησης
    * Αλλαγή `DriveMode`
        * Αυτόματη οδήγηση - σε κάποιο DriveMode
    * Αλλαγή `MusicMode`
    * Αλλαγή `LightMode`
    * mute: αναστολή / επανεκίνηση ήχων (και φωτισμού;)
    
